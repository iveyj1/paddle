<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="demo">
<h2>The XMLHttpRequest Object</h2>
<button type="button" onclick="loadDoc()">Change Content</button>
<canvas id="myCanvas" width="400" height="400" style="border:1px solid #d3d3d3;">
</div>

<a href="up.htm"up.htm</a> 

<script>
//loadDoc();

function loadDoc() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      processData(this.responseText);
    }
  };
  xhttp.open("GET", "../data/data000.csv", true);
  xhttp.send();
}

function processData(allText) {
    var allTextLines = allText.split(/\r\n|\n/);
    var headers = allTextLines[0].split(',');
    var lines = [];
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");

    for(x=0; x<360; x += 20){
        ctx.moveTo(x+5,180);
        ctx.lineTo(x,180);
    }

    ctx.moveTo(0,180);
    for (var i = 1; i < allTextLines.length; i++) {
        var data = allTextLines[i].split(',');
        if (data.length == headers.length) {
            y = parseInt(data[1]);
            y = (-1.0 * y - 1000000.0) / 100.0 + 200;
            ctx.lineTo(i + 5,y);
        }
    }
    ctx.stroke();
}
</script>

</body>
</html>



