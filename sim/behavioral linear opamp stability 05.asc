Version 4
SHEET 1 1764 1540
WIRE -1472 32 -1600 32
WIRE -1600 80 -1600 32
WIRE -1424 160 -1424 128
WIRE -1424 160 -1600 160
WIRE -1312 160 -1312 128
WIRE -1152 160 -1312 160
WIRE -1600 304 -1600 160
WIRE -1536 304 -1600 304
WIRE -1248 304 -1456 304
WIRE -1152 304 -1152 160
WIRE -1152 304 -1248 304
WIRE -1248 320 -1248 304
WIRE -1248 416 -1248 400
WIRE -1472 544 -1600 544
WIRE -1600 592 -1600 544
WIRE -1424 672 -1424 640
WIRE -1424 672 -1600 672
WIRE -1312 672 -1312 640
WIRE -1152 672 -1312 672
WIRE -1600 816 -1600 672
WIRE -1520 816 -1600 816
WIRE -1232 816 -1440 816
WIRE -1152 816 -1152 672
WIRE -1152 816 -1232 816
WIRE -1232 832 -1232 816
WIRE -1232 928 -1232 912
WIRE -1456 1136 -1632 1136
WIRE -1200 1136 -1248 1136
WIRE -1632 1200 -1632 1136
WIRE -1632 1328 -1632 1280
WIRE -1408 1328 -1408 1232
WIRE -1296 1328 -1296 1232
WIRE -1296 1328 -1408 1328
FLAG -1248 416 0
FLAG -1248 304 x1
FLAG -1232 928 0
FLAG -1232 816 x2
FLAG -1600 80 0
FLAG -1600 592 0
FLAG -1632 1328 0
SYMBOL current -1248 400 M180
WINDOW 0 24 77 Left 2
WINDOW 3 37 5 Left 2
WINDOW 123 37 33 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Ii1
SYMATTR Value 0
SYMATTR Value2 AC {0}
SYMBOL voltage -1440 304 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 -60 56 VBottom 2
WINDOW 123 -32 56 VBottom 2
WINDOW 39 -32 56 VBottom 2
SYMATTR InstName Vi1
SYMATTR Value 0
SYMATTR Value2 AC {1}
SYMBOL current -1232 912 M180
WINDOW 0 24 77 Left 2
WINDOW 3 37 5 Left 2
WINDOW 123 37 33 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Ii2
SYMATTR Value 0
SYMATTR Value2 AC {1}
SYMBOL voltage -1424 816 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 -60 56 VBottom 2
WINDOW 123 -32 56 VBottom 2
WINDOW 39 -32 56 VBottom 2
SYMATTR InstName Vi2
SYMATTR Value 0
SYMATTR Value2 AC {0)}
SYMBOL system_model -1376 32 R0
SYMATTR InstName SYS1
SYMBOL system_model -1376 544 R0
SYMATTR InstName SYS2
SYMBOL system_model -1360 1136 R0
SYMATTR InstName SYS3
SYMBOL voltage -1632 1184 M0
WINDOW 0 32 56 VTop 2
WINDOW 3 -60 56 VBottom 2
WINDOW 123 -32 56 VBottom 2
WINDOW 39 -32 56 VBottom 2
SYMATTR InstName Vi4
SYMATTR Value 0
SYMATTR Value2 AC 1
TEXT -2616 192 Left 2 !.ac dec 30 .1 100Meg
TEXT -1832 -456 Left 2 ;Here the open loop gain is determined from the closed loop system[1].\nThe open loop gain can be plotted by plotting the quantity:\n \n-1/(1-1/(2*(I(Vi1)*V(x2)-V(x1)*I(Vi2))+V(x1)+I(Vi2)))\nAlternatively, you add the following line to your plot.defs file:\n.func T.et.al() -1/(1-1/(2*(I(Vi)@1*V(x)@2-V(x)@1*I(Vi)@2)+V(x)@1+I(Vi)@2))\nAnd then plot simply T.et.al()
TEXT -2616 160 Left 2 ;.step param prb list -1 1 ; set prb=0 to turn off probe
TEXT -1040 192 Left 2 ;Probe elements added to  inject\nsignals to measure the open loop\nresponse from the closed loop system
TEXT -2608 288 Left 2 !.step param RS list 1 10 100\n;.param RS 10
TEXT -2632 480 Left 2 ;.param cl 1 ; set prb=0 to turn off probe
